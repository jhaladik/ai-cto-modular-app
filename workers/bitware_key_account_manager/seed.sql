-- Key Account Manager Database Seed Data
-- File: workers/bitware_key_account_manager/seed.sql

-- ==================== SAMPLE CLIENTS ====================

INSERT OR IGNORE INTO clients (
    client_id, 
    company_name, 
    primary_contact_name,
    primary_contact_email, 
    subscription_tier, 
    account_status,
    monthly_budget_usd,
    used_budget_current_month,
    industry,
    company_size,
    use_case_description,
    primary_interests,
    communication_style,
    preferred_report_formats,
    created_at,
    last_interaction,
    total_lifetime_value,
    satisfaction_score
) VALUES 
    (
        'client_demo_001',
        'TechCorp Solutions',
        'Sarah Johnson',
        'sarah.johnson@techcorp.com',
        'premium',
        'active',
        500.0,
        125.50,
        'Technology',
        'Medium (50-200 employees)',
        'Need AI-powered market research and competitive analysis for product development',
        '["artificial intelligence", "market research", "technology trends", "competitive analysis"]',
        'professional',
        '["json", "html", "pdf"]',
        '2024-07-01 10:00:00',
        '2024-07-22 14:30:00',
        2500.00,
        4.5
    ),
    (
        'client_demo_002',
        'GreenEnergy Innovations',
        'Michael Chen',
        'michael.chen@greenenergy.com',
        'enterprise',
        'active',
        2000.0,
        450.75,
        'Renewable Energy',
        'Large (500+ employees)',
        'Comprehensive climate tech research and regulatory monitoring',
        '["renewable energy", "climate technology", "environmental policy", "sustainability"]',
        'technical',
        '["json", "detailed_html", "executive_summary"]',
        '2024-06-15 09:15:00',
        '2024-07-21 16:45:00',
        15000.00,
        4.8
    ),
    (
        'client_demo_003',
        'FinanceFirst Consulting',
        'Emily Rodriguez',
        'emily.rodriguez@financefirst.com',
        'standard',
        'active',
        200.0,
        85.25,
        'Financial Services',
        'Small (10-50 employees)',
        'Daily financial news monitoring and market trend analysis',
        '["finance", "banking", "cryptocurrency", "market trends"]',
        'formal',
        '["json", "email"]',
        '2024-07-10 11:30:00',
        '2024-07-22 08:15:00',
        750.00,
        4.2
    ),
    (
        'client_trial_001',
        'StartupBoost',
        'Alex Kim',
        'alex.kim@startupboost.com',
        'basic',
        'trial',
        50.0,
        12.00,
        'Business Services',
        'Startup (1-10 employees)',
        'Testing AI research capabilities for startup ecosystem analysis',
        '["startups", "venture capital", "entrepreneurship"]',
        'casual',
        '["json"]',
        '2024-07-20 14:00:00',
        '2024-07-22 10:00:00',
        12.00,
        3.8
    );

-- ==================== SAMPLE PIPELINE TEMPLATES ====================

INSERT OR IGNORE INTO pipeline_template_cache (
    template_name,
    display_name,
    description,
    category,
    complexity_level,
    worker_flow,
    typical_use_cases,
    keyword_triggers,
    estimated_duration_ms,
    estimated_cost_usd,
    min_cost_usd,
    max_cost_usd,
    is_active,
    requires_premium,
    last_synced_from_orchestrator,
    sync_source
) VALUES 
    (
        'topic_research_basic',
        'Basic Topic Research',
        'Discover RSS sources and analyze basic content for a specific topic',
        'research',
        'basic',
        '[{"worker": "topic_researcher", "step": 1}, {"worker": "rss_librarian", "step": 2}]',
        '["topic discovery", "basic research", "source finding"]',
        '["research", "sources", "basic", "topic", "find"]',
        60000,
        0.05,
        0.02,
        0.10,
        1,
        0,
        '2024-07-22 12:00:00',
        'manual_seed'
    ),
    (
        'comprehensive_analysis',
        'Comprehensive Topic Analysis',
        'Full pipeline with source discovery, content fetching, AI analysis, and report generation',
        'analysis',
        'premium',
        '[{"worker": "topic_researcher", "step": 1}, {"worker": "rss_librarian", "step": 2}, {"worker": "feed_fetcher", "step": 3}, {"worker": "content_classifier", "step": 4}, {"worker": "report_builder", "step": 5}]',
        '["comprehensive analysis", "full research", "detailed reports", "market intelligence"]',
        '["comprehensive", "analysis", "detailed", "report", "intelligence", "deep dive"]',
        300000,
        0.50,
        0.25,
        1.00,
        1,
        1,
        '2024-07-22 12:00:00',
        'manual_seed'
    ),
    (
        'news_monitoring',
        'Daily News Monitoring',
        'Automated daily news collection and sentiment analysis for specific topics',
        'monitoring',
        'standard',
        '[{"worker": "rss_librarian", "step": 1}, {"worker": "feed_fetcher", "step": 2}, {"worker": "content_classifier", "step": 3}]',
        '["news monitoring", "daily updates", "content tracking", "sentiment analysis"]',
        '["news", "daily", "monitoring", "updates", "tracking"]',
        120000,
        0.15,
        0.08,
        0.30,
        1,
        0,
        '2024-07-22 12:00:00',
        'manual_seed'
    ),
    (
        'competitive_intelligence',
        'Competitive Intelligence Research',
        'Advanced competitive analysis with multiple sources and AI-powered insights',
        'intelligence',
        'enterprise',
        '[{"worker": "topic_researcher", "step": 1}, {"worker": "rss_librarian", "step": 2}, {"worker": "feed_fetcher", "step": 3}, {"worker": "content_classifier", "step": 4}, {"worker": "report_builder", "step": 5}]',
        '["competitive analysis", "market intelligence", "competitor monitoring", "business intelligence"]',
        '["competitive", "competitor", "intelligence", "market", "business", "analysis"]',
        450000,
        1.20,
        0.60,
        2.50,
        1,
        1,
        '2024-07-22 12:00:00',
        'manual_seed'
    ),
    (
        'trend_analysis',
        'Trend Analysis & Forecasting',
        'Identify emerging trends and generate predictive insights from content analysis',
        'forecasting',
        'premium',
        '[{"worker": "topic_researcher", "step": 1}, {"worker": "feed_fetcher", "step": 2}, {"worker": "content_classifier", "step": 3}, {"worker": "report_builder", "step": 4}]',
        '["trend analysis", "forecasting", "predictive insights", "emerging trends"]',
        '["trends", "forecasting", "prediction", "emerging", "future"]',
        240000,
        0.80,
        0.40,
        1.50,
        1,
        1,
        '2024-07-22 12:00:00',
        'manual_seed'
    );

-- ==================== SAMPLE COMMUNICATIONS ====================

INSERT OR IGNORE INTO client_communications (
    communication_id,
    client_id,
    type,
    subject,
    content,
    sender_email,
    intent_detected,
    sentiment_score,
    urgency_level,
    confidence_score,
    processed_by_kam,
    requires_human_attention,
    response_sent,
    sent_at,
    processed_at
) VALUES 
    (
        'comm_demo_001',
        'client_demo_001',
        'email_inbound',
        'Request for AI market research',
        'Hi, we need a comprehensive analysis of the AI market trends for Q3 2024. Can you help us understand the competitive landscape and emerging technologies?',
        'sarah.johnson@techcorp.com',
        'request_report',
        0.7,
        'medium',
        0.9,
        1,
        0,
        1,
        '2024-07-22 09:15:00',
        '2024-07-22 09:16:30'
    ),
    (
        'comm_demo_002',
        'client_demo_002',
        'email_inbound',
        'Urgent: Climate policy update needed',
        'We need an urgent analysis of the new climate regulations announced yesterday. This is critical for our compliance review meeting on Friday.',
        'michael.chen@greenenergy.com',
        'request_report',
        0.2,
        'high',
        0.95,
        1,
        1,
        1,
        '2024-07-22 14:30:00',
        '2024-07-22 14:32:15'
    ),
    (
        'comm_demo_003',
        'client_demo_003',
        'email_inbound',
        'Daily market briefing request',
        'Please provide the daily financial market summary for today. Include cryptocurrency trends and banking sector updates.',
        'emily.rodriguez@financefirst.com',
        'request_report',
        0.5,
        'low',
        0.85,
        1,
        0,
        1,
        '2024-07-22 08:00:00',
        '2024-07-22 08:01:45'
    ),
    (
        'comm_feedback_001',
        'client_demo_001',
        'email_inbound',
        'Great work on the last report!',
        'The AI market analysis you provided last week was excellent. The insights helped us make important strategic decisions. Thank you!',
        'sarah.johnson@techcorp.com',
        'provide_feedback',
        0.9,
        'low',
        0.95,
        1,
        0,
        1,
        '2024-07-20 16:45:00',
        '2024-07-20 16:46:30'
    );

-- ==================== SAMPLE CLIENT REQUESTS ====================

INSERT OR IGNORE INTO client_requests (
    request_id,
    client_id,
    communication_id,
    request_type,
    original_message,
    processed_request,
    selected_template,
    template_selection_method,
    template_confidence_score,
    orchestrator_pipeline_id,
    request_status,
    custom_parameters,
    created_at,
    started_processing_at,
    completed_at
) VALUES 
    (
        'req_demo_001',
        'client_demo_001',
        'comm_demo_001',
        'pipeline_execution',
        'comprehensive analysis of the AI market trends for Q3 2024',
        'AI market trends analysis Q3 2024 competitive landscape emerging technologies',
        'comprehensive_analysis',
        'ai_recommended',
        0.92,
        'pipe_ai_market_20240722_001',
        'completed',
        '{"time_range": "Q3 2024", "focus": "competitive landscape", "depth": "comprehensive"}',
        '2024-07-22 09:16:30',
        '2024-07-22 09:17:00',
        '2024-07-22 09:22:15'
    ),
    (
        'req_demo_002',
        'client_demo_002',
        'comm_demo_002',
        'pipeline_execution',
        'urgent analysis of the new climate regulations announced yesterday',
        'climate regulations analysis urgent policy update compliance',
        'news_monitoring',
        'ai_recommended',
        0.88,
        'pipe_climate_20240722_002',
        'processing',
        '{"urgency": "high", "focus": "compliance", "time_sensitive": true}',
        '2024-07-22 14:32:15',
        '2024-07-22 14:33:00',
        NULL
    ),
    (
        'req_demo_003',
        'client_demo_003',
        'comm_demo_003',
        'pipeline_execution',
        'daily financial market summary cryptocurrency trends banking sector',
        'daily financial market summary cryptocurrency banking sector updates',
        'news_monitoring',
        'pattern_match',
        0.75,
        'pipe_finance_20240722_003',
        'completed',
        '{"frequency": "daily", "sectors": ["cryptocurrency", "banking"]}',
        '2024-07-22 08:01:45',
        '2024-07-22 08:02:00',
        '2024-07-22 08:05:30'
    );

-- ==================== SAMPLE USAGE ANALYTICS ====================

INSERT OR IGNORE INTO template_usage_analytics (
    usage_id,
    client_id,
    template_name,
    request_context,
    selection_method,
    confidence_score,
    request_successful,
    client_satisfaction,
    cost_vs_estimate_ratio,
    time_vs_estimate_ratio,
    used_at
) VALUES 
    (
        'usage_001',
        'client_demo_001',
        'comprehensive_analysis',
        'AI market trends analysis Q3 2024',
        'ai_recommended',
        0.92,
        1,
        5.0,
        0.95,
        1.1,
        '2024-07-22 09:22:15'
    ),
    (
        'usage_002',
        'client_demo_003',
        'news_monitoring',
        'daily financial market summary',
        'pattern_match',
        0.75,
        1,
        4.0,
        1.05,
        0.85,
        '2024-07-22 08:05:30'
    ),
    (
        'usage_003',
        'client_demo_002',
        'competitive_intelligence',
        'renewable energy competitive landscape',
        'ai_recommended',
        0.88,
        1,
        4.8,
        0.92,
        1.05,
        '2024-07-18 15:30:00'
    );

-- ==================== SAMPLE CLIENT NEEDS ANALYSIS ====================

INSERT OR IGNORE INTO client_needs_analysis (
    analysis_id,
    client_id,
    analysis_period_start,
    analysis_period_end,
    total_requests,
    avg_requests_per_week,
    most_common_topics,
    preferred_templates,
    total_spend_usd,
    avg_cost_per_request,
    budget_utilization_rate,
    avg_satisfaction_score,
    completion_rate,
    predicted_next_request_topic,
    predicted_monthly_spend,
    churn_risk_score,
    upsell_opportunity_score,
    generated_at,
    generated_by
) VALUES 
    (
        'analysis_001',
        'client_demo_001',
        '2024-06-01',
        '2024-07-22',
        8,
        1.5,
        '["artificial intelligence", "market research", "technology trends"]',
        '["comprehensive_analysis", "trend_analysis"]',
        425.50,
        53.19,
        0.85,
        4.5,
        1.0,
        'machine learning developments',
        475.00,
        0.1,
        0.8,
        '2024-07-22 12:00:00',
        'auto_analysis'
    ),
    (
        'analysis_002',
        'client_demo_002',
        '2024-06-01',
        '2024-07-22',
        12,
        2.3,
        '["renewable energy", "climate technology", "environmental policy"]',
        '["comprehensive_analysis", "competitive_intelligence"]',
        850.75,
        70.90,
        0.43,
        4.8,
        1.0,
        'carbon capture technology',
        1200.00,
        0.05,
        0.9,
        '2024-07-22 12:00:00',
        'auto_analysis'
    );

-- ==================== VERIFY SEED DATA ====================

-- Simple verification queries (these will be ignored during execution but serve as documentation)
-- SELECT COUNT(*) as client_count FROM clients;
-- SELECT COUNT(*) as template_count FROM pipeline_template_cache;
-- SELECT COUNT(*) as communication_count FROM client_communications;
-- SELECT COUNT(*) as request_count FROM client_requests;